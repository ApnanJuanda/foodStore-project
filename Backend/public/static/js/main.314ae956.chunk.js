(this["webpackJsonpfoodstore-ui"]=this["webpackJsonpfoodstore-ui"]||[]).push([[0],{138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(28),i=a.n(s),u=a(11),l=a(14),o=(a(90),a(15)),j=a(2),d=[{icon:"/images/menus/semua.png",label:"semua",id:""},{icon:"/images/menus/utama.png",label:"utama",id:"utama"},{icon:"/images/menus/minuman.png",label:"minuman",id:"minuman"},{icon:"/images/menus/snack.png",label:"snack",id:"snack"},{icon:"/images/menus/pastry.png",label:"pastry",id:"pastry"}],b=a(74);a.n(b).a.config();var m="https://foodstore-apps.herokuapp.com",h="Great Store",O="20000",x="Apnan Juanda",p="apnanjuanda@gmail.com",f={account_no:"xxxxx-xxxxxx-333-34",bank_name:"Mandiri"},g=function(){return Object(r.jsx)(u.b,{to:"/",children:Object(r.jsx)("div",{className:"text-red-600 font-bold text-4xl",children:h})})},v=a(75),k=a.n(v),y=function(){var e,t=Object(o.c)((function(e){return e.auth}));return Object(r.jsxs)(j.n,{desktop:2,justify:"between",items:"center",children:[Object(r.jsx)("div",{children:Object(r.jsx)(g,{})}),Object(r.jsx)("div",{className:"mr-5 text-right",children:Object(r.jsxs)(u.b,{to:(null===t||void 0===t?void 0:t.user)?"/account":"/login",children:[Object(r.jsx)("div",{clasName:"mr-2 inline-block text-red-600 font-bold",children:null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.full_name}),Object(r.jsx)(j.c,{icon:Object(r.jsx)(k.a,{})})]})})]})},w=a(8),S=a(4),_=a.n(S),P=a(6),N=a(76),I=a.n(N),C="features/Products/START_FETCHING_PRODUCT",E="features/Products/ERROR_FETCHING_PRODUCT",T="features/Products/SUCCESS_FETCHING_PRODUCT",q="features/Products/SET_PAGE",A="features/Products/SET_KEYWORD",L="features/Products/SET_CATEGORY",D="features/Products/SET_TAGS",M="features/Products/NEXT_PAGE",B="features/Products/PREV_PAGE",H="features/Products/TOGGLE_TAG",z=a(16),R=a.n(z),K=function(){var e=Object(P.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(m,"/api/products"),{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=I()(K,1e3),G=function(){return{type:C}},U=function(e){return Object(w.a)({type:T},e)},F=function(){return{type:E}},V=a(37),X=a.n(V),Y={"":[],utama:["burger","pizza","bread"],pastry:["cheese","strawberry","muffin"],snack:["fried","bread","cheese","coffee"],minuman:["coffee","tea","hot","cold"]},W=a(33),$=a.n(W),Q=a(47),Z=a.n(Q),ee=function(e){return e.reduce((function(e,t){return e+t.price*t.qty}),0)},te=function(e){return isNaN(parseInt(e))?"":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:2,style:"currency",currency:"IDR"}).format(e)},ae=function(e){var t=e.items,a=e.onItemInc,n=e.onItemDec,c=e.onCheckout,s=ee(t);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"px-2 border-b mt-5 pb-5",children:[Object(r.jsxs)("div",{className:"text-3xl flex items-center text-red-700",children:[Object(r.jsx)(Z.a,{}),Object(r.jsx)("div",{className:"ml-2",children:"Keranjang"})]}),Object(r.jsxs)(j.s,{as:"h5",children:["Total : ",te(s)]}),Object(r.jsx)(j.b,{text:"Checkout",fitContainer:!0,iconAfter:Object(r.jsx)($.a,{}),disabled:!t.length,onClick:c})]}),t.length?null:Object(r.jsx)("div",{className:"text-center text-sm text-red-900",children:"Belum ada items di keranjang"}),Object(r.jsx)("div",{className:"p-2",children:t.map((function(e,t){return Object(r.jsx)("div",{className:"mb-2",children:Object(r.jsx)(j.e,{imgUrl:"".concat(m,"/upload/").concat(e.image_url),name:e.name,qty:e.qty,color:"orange",onInc:function(t){return a(e)},onDec:function(t){return n(e)}})},t)}))})]})},re="features/Cart/ADD_ITEM",ne="features/Cart/REMOVE_ITEM",ce="features/Cart/CLEAR_ITEMS",se="features/Cart/SET_ITEMS",ie=function(e){return{type:re,item:e}},ue=function(){return{type:ce}},le=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.products})),a=Object(o.c)((function(e){return e.cart})),c=Object(l.g)();return n.useEffect((function(){e(function(){var e=Object(P.a)(_.a.mark((function e(t,a){var r,n,c,s,i,u,l,o,j,d;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G()),r=a().products.perPage||9,n=a().products.currentPage||1,c=a().products.tags||[],s=a().products.keyword||"",i=a().products.category||"",u={limit:r,skip:n*r-r,q:s,tags:c,category:i},e.prev=7,e.next=10,J(u);case 10:l=e.sent,o=l.data,j=o.data,d=o.count,t(U({data:j,count:d})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),t(F());case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,t.currentPage,t.keyword,t.category,t.tags]),Object(r.jsx)("div",{children:Object(r.jsx)(j.k,{sidebar:Object(r.jsx)(j.p,{items:d,verticalAlign:"top",active:t.category,onChange:function(t){return e(function(e){return{type:L,category:e}}(t))}}),content:Object(r.jsxs)("div",{className:"md:flex md:flex-row-reverse w-full\r mr-5 h-full min-h-screen",children:[Object(r.jsxs)("div",{className:"w-full md:w-3/4 pl-5 pb-10",children:[Object(r.jsx)(y,{}),Object(r.jsxs)("div",{className:"w-full text-center mb-10 mt-5",children:[Object(r.jsx)(j.i,{fullRound:!0,value:t.keyword,placeholder:"cari makanan favoritmu...",fitContainer:!0,onChange:function(t){return e((a=t.target.value,{type:A,keyword:a}));var a}}),Object(r.jsx)("div",{className:"mb-5 pl-2 flex w-3/3 overflow-auto pb-5",children:Y[t.category].map((function(a,n){return Object(r.jsx)("div",{children:Object(r.jsx)(j.m,{text:a,icon:a.slice(0,1).toUpperCase(),isActive:t.tags.includes(a),onClick:function(t){return e(function(e){return{type:H,tag:e}}(a))}})},n)}))})]}),"process"!==t.status||t.data.length?null:Object(r.jsx)("div",{className:"flex justify-center",children:Object(r.jsx)(X.a,{color:"red"})}),Object(r.jsx)(j.n,{desktop:3,items:"stretch",children:t.data.map((function(t,a){return Object(r.jsx)("div",{className:"p-2",children:Object(r.jsx)(j.f,{title:t.name,imgUrl:"".concat(m,"/upload/").concat(t.image_url),price:t.price,onAddToCart:function(a){return e(ie(t))}})},a)}))}),Object(r.jsx)("div",{className:"text-center my-10",children:Object(r.jsx)(j.l,{totalItems:t.totalItems,page:t.currentPage,perPage:t.perPage,onNext:function(t){return e({type:M})},onChange:function(t){return e(function(){return{type:q,currentPage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}(t))},onPrev:function(t){return e({type:B})}})})]}),Object(r.jsx)("div",{className:"w-full md:w-1/4 h-full shadow-lg border-r border-white bg-gray-100",children:Object(r.jsx)(ae,{items:a,onItemInc:function(t){return e(ie(t))},onItemDec:function(t){return e(function(e){return{type:ne,item:e}}(t))},onCheckout:function(e){return c.push("/checkout")}})})]}),sidebarSize:80})})},oe=a(34),je=a(77),de="features/Auth/USER_LOGIN",be="features/Auth/USER_LOGOUT",me=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{user:null,token:null};var he=a(12),Oe="process",xe="success",pe="error",fe={data:[],currentPage:1,totalItems:-1,perPage:10,keyword:"",category:"",tags:[],status:"idle"},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(w.a)(Object(w.a)({},e),{},{status:Oe});case T:return Object(w.a)(Object(w.a)({},e),{},{status:xe,data:t.data,totalItems:t.count});case E:return Object(w.a)(Object(w.a)({},e),{},{status:pe});case q:return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case A:return Object(w.a)(Object(w.a)({},e),{},{keyword:t.keyword,category:"",tags:[]});case L:return Object(w.a)(Object(w.a)({},e),{},{currentPage:1,tags:[],category:t.category,keyword:""});case D:return Object(w.a)(Object(w.a)({},e),{},{tags:t.tags});case H:return e.tags.includes(t.tag)?Object(w.a)(Object(w.a)({},e),{},{currentPage:1,tags:e.tags.filter((function(e){return e!==t.tag}))}):Object(w.a)(Object(w.a)({},e),{},{currentPage:1,tags:[].concat(Object(he.a)(e.tags),[t.tag])});case M:return Object(w.a)(Object(w.a)({},e),{},{currentPage:e.currentPage+1});case B:return Object(w.a)(Object(w.a)({},e),{},{currentPage:e.currentPage-1});default:return e}},ve=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];var ke,ye,we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.d,Se=Object(oe.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return{user:t.user,token:t.token};case be:return{user:null,token:null};default:return e}},products:ge,cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return e.find((function(e){return e._id===t.item._id}))?e.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{qty:e._id===t.item._id?e.qty+1:e.qty})})):[].concat(Object(he.a)(e),[Object(w.a)(Object(w.a)({},t.item),{},{qty:1})]);case ne:return e.map((function(e){return Object(w.a)(Object(w.a)({},e),{},{qty:e._id===t.item._id?e.qty-1:e.qty})})).filter((function(e){return e.qty>0}));case ce:return[];case se:return t.items;default:return e}}}),_e=Object(oe.e)(Se,we(Object(oe.a)(je.a))),Pe=function(){var e=Object(P.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.put("".concat(m,"/api/carts"),{items:a},{headers:{authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(P.a)(_.a.mark((function e(){var t,a,r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,R.a.get("".concat(m,"/api/carts"),{headers:{authorization:"Bearer ".concat(a)}});case 5:r=e.sent,(n=r.data).error||_e.dispatch({type:se,items:n});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ie(){var e=ke,t=ye;ke=_e.getState().auth,ye=_e.getState().cart;var a=ke.token;ke!==e&&(localStorage.setItem("auth",JSON.stringify(ke)),Pe(a,ye)),ye!==t&&(localStorage.setItem("cart",JSON.stringify(ye)),Pe(a,ye))}var Ce=a(9),Ee=a(38),Te={required:{value:!0,message:"Nama lengkap harus diisi."},maxLength:{value:500,message:"Panjang nama lengkap maksimal 500 karakter."}},qe={required:{value:!0,message:"Email harus diisi."},maxLength:{value:255,message:"Panjang email maksimal 255 karakter."},pattern:{value:/^([\w-.]+@([\w-]+.)+[\w-]{2,4})?$/,message:"Email tidak valid"}},Ae={required:{value:!0,message:"Password harus diisi."},maxLength:{value:255,message:"Panjang password maksimal 255 karakter."}},Le={required:{value:!0,message:"Konfirmasi password harus diisi."}},De=function(){var e=Object(P.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("".concat(m,"/auth/register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(P.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("".concat(m,"/auth/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Be=function(){var e=Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token,e.next=3,R.a.post("".concat(m,"/auth/logout"),null,{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return localStorage.removeItem("auth"),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He="idle",ze="process",Re="success",Ke="error",Je=function(){var e,t,a,c,s=Object(Ee.a)(),i=s.register,o=s.handleSubmit,d=s.errors,b=s.setError,m=n.useState(He),h=Object(Ce.a)(m,2),O=h[0],x=h[1],p=Object(l.g)(),f=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,r,n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.password,r=t.password_confirmation,a===r){e.next=3;break}return e.abrupt("return",b("password_confirmation",{type:"equality",message:"Konfirmasi Password harus sama dengan Password"}));case 3:return x(ze),e.next=6,De(t);case 6:if(n=e.sent,!(c=n.data).error){e.next=13;break}return Object.keys(c.fields).forEach((function(e){var t,a;b(e,{type:"server",message:null===(t=c.fields[e])||void 0===t||null===(a=t.properties)||void 0===a?void 0:a.message})})),x(Ke),e.abrupt("return");case 13:x(Re),p.push("/register/berhasil");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(j.j,{size:"small",children:Object(r.jsxs)(j.d,{color:"white",children:[Object(r.jsx)("div",{className:"text-center mb-5",children:Object(r.jsx)(g,{})}),Object(r.jsxs)("form",{onSubmit:o(f),children:[Object(r.jsx)(j.g,{errorMessage:null===(e=d.full_name)||void 0===e?void 0:e.message,children:Object(r.jsx)(j.i,{name:"full_name",placeholder:"Nama Lengkap",fitContainer:!0,ref:i(Te)})}),Object(r.jsx)(j.g,{errorMessage:null===(t=d.email)||void 0===t?void 0:t.message,children:Object(r.jsx)(j.i,{name:"email",placeholder:"Email",fitContainer:!0,ref:i(qe)})}),Object(r.jsx)(j.g,{errorMessage:null===(a=d.password)||void 0===a?void 0:a.message,children:Object(r.jsx)(j.h,{name:"password",placeholder:"Password",fitContainer:!0,ref:i(Ae)})}),Object(r.jsx)(j.g,{errorMessage:null===(c=d.password_confirmation)||void 0===c?void 0:c.message,children:Object(r.jsx)(j.h,{name:"password_confirmation",placeholder:"Konfirmasi Password",fitContainer:!0,ref:i(Le)})}),Object(r.jsx)(j.b,{size:"large",fitContainer:!0,disabled:O===ze,children:O===ze?"Sedang Memproses":"Mendaftar"})]}),Object(r.jsxs)("div",{className:"text-center mt-2",children:["Sudah punya akun?"," ",Object(r.jsxs)(u.b,{to:"/login",children:[" ",Object(r.jsx)("b",{children:" Masuk Sekarang. "})," "]})]})]})})},Ge=function(){return Object(r.jsx)(j.j,{size:"small",children:Object(r.jsx)(j.d,{color:"grey",children:Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)(j.s,{as:"h3",children:"Pendaftaran Berhasil"}),Object(r.jsx)(j.s,{children:"Silahkan masuk ke Aplikasi"}),Object(r.jsx)("br",{}),Object(r.jsx)(u.b,{to:"/login",children:Object(r.jsx)(j.b,{fitContainer:!0,children:"Login"})})]})})})};function Ue(e,t){return{type:de,user:e,token:t}}var Fe={required:{value:!0,message:"Email tidak boleh kosong"},maxLength:{value:255,message:"Panjang email maksimal 255 karakter"}},Ve={required:{value:!0,message:"Password tidak boleh kosong."},maxLength:{value:255,message:"Panjang password maksimal 255 karakter."}},Xe="idle",Ye="process",We="success",$e="error";function Qe(){var e,t,a=Object(Ee.a)(),c=a.register,s=a.handleSubmit,i=a.errors,d=a.setError,b=n.useState(Xe),m=Object(Ce.a)(b,2),h=m[0],O=m[1],x=Object(o.b)(),p=Object(l.g)(),f=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,r,n,c,s,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,O(Ye),e.next=4,Me(a,r);case 4:n=e.sent,(c=n.data).error?(d("password",{type:"invalidCredential",message:c.message}),O($e)):(s=c.user,i=c.token,x(Ue(s,i)),p.push("/")),O(We);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(j.j,{size:"small",children:[Object(r.jsx)("br",{}),Object(r.jsxs)(j.d,{color:"white",children:[Object(r.jsx)("div",{className:"text-center mb-5",children:Object(r.jsx)(g,{})}),Object(r.jsxs)("form",{onSubmit:s(f),children:[Object(r.jsx)(j.g,{errorMessage:null===(e=i.email)||void 0===e?void 0:e.message,children:Object(r.jsx)(j.i,{placeholder:"email",fitContainer:!0,name:"email",ref:c(Fe)})}),Object(r.jsx)(j.g,{errorMessage:null===(t=i.password)||void 0===t?void 0:t.message,children:Object(r.jsx)(j.h,{placeholder:"password",name:"password",fitContainer:!0,ref:c(Ve)})}),Object(r.jsx)(j.b,{fitContainer:!0,size:"large",disabled:"process"===h,children:"Login"})]}),Object(r.jsxs)("div",{className:"text-center mt-2",children:["Belum punya akun?"," ",Object(r.jsx)(u.b,{to:"/register",children:Object(r.jsx)("b",{children:"Daftar sekarang."})})]})]})]})}var Ze=function(e){var t=e.tingkat,a=e.kodeInduk,c=e.onChange,s=e.value,i=n.useState([]),u=Object(Ce.a)(i,2),l=u[0],o=u[1],d=n.useState(!1),b=Object(Ce.a)(d,2),h=b[0],O=b[1];return n.useEffect((function(){O(!0),R.a.get("".concat(m,"/api/wilayah/").concat(t,"?kode_induk=").concat(a)).then((function(e){var t=e.data;return o(t)})).finally((function(e){return O(!1)}))}),[a,t]),Object(r.jsx)(j.o,{options:l.map((function(e){return{label:e.nama,value:e.kode}})),onChange:c,value:s,isLoading:h,isDisabled:h||!l.length})};Ze.defaultProps={tingkat:"provinsi"};var et=Ze,tt=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,R.a.get("".concat(m,"/api/address"),{params:{limit:t.limit,skip:t.page*t.limit-t.limit},headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,R.a.post("".concat(m,"/api/address"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt={required:{value:!0,message:"Nama alamat tidak boleh kosong."},maxLength:{value:500,message:"Panjang nama alamat maksimal 500 karakter"},minLength:{value:5,message:"Panjang nama alamat minimal 5 karakter"}},nt={required:{value:!0,message:"Provinsi harus dipilih."}},ct={required:{value:!0,message:"Kabupaten harus dipilih."}},st={required:{value:!0,message:"Kecamatan harus dipilih."}},it={required:{value:!0,message:"Kelurahan harus dipilih."}},ut={required:{value:!0,message:"Detail alamat harus diisi"},maxLength:{value:1e3,message:"Panjang detail alamat maksimal 1000 karakter"}},lt=function(){var e,t,a,c,s,i,u,o,d,b=Object(l.g)(),m=Object(Ee.a)(),h=m.handleSubmit,O=m.register,x=m.errors,p=m.setValue,f=m.watch,g=m.getValues,v=f();n.useEffect((function(){O({name:"provinsi"},nt),O({name:"kabupaten"},ct),O({name:"kecamatan"},st),O({name:"kelurahan"},it)}),[O]),n.useEffect((function(){p("kabupaten",null),p("kecamatan",null),p("kelurahan",null)}),[v.provinsi,p]),n.useEffect((function(){p("kecamatan",null),p("kelurahan",null)}),[v.kabupaten,p]),n.useEffect((function(){p("kelurahan",null)}),[v.kecamatan,p]);var k=function(e,t){p(e,t,{shouldValidate:!0,shouldDirty:!0})},w=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={nama:t.nama_alamat,detail:t.detail_alamat,provinsi:t.provinsi.label,kabupaten:t.kabupaten.label,kecamatan:t.kecamatan.label,kelurahan:t.kelurahan.label},e.next=3,at(a);case 3:if(r=e.sent,!r.data.error){e.next=7;break}return e.abrupt("return");case 7:b.push("/alamat-pengiriman");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:h(w),children:[Object(r.jsx)(j.g,{label:"Nama alamat",errorMessage:null===(e=x.nama_alamat)||void 0===e?void 0:e.message,color:"black",children:Object(r.jsx)(j.i,{placeholder:"Nama alamat",fitContainer:!0,name:"nama_alamat",ref:O(rt)})}),Object(r.jsx)(j.g,{label:"Provinsi",errorMessage:null===(t=x.provinsi)||void 0===t?void 0:t.message,color:"black",children:Object(r.jsx)(et,{onChange:function(e){return k("provinsi",e)},tingkat:"provinsi",value:g().provinsi})}),Object(r.jsx)(j.g,{label:"Kabupaten/kota",errorMessage:null===(a=x.kabupaten)||void 0===a?void 0:a.message,color:"black",children:Object(r.jsx)(et,{tingkat:"kabupaten",kodeInduk:null===(c=g().provinsi)||void 0===c?void 0:c.value,onChange:function(e){return k("kabupaten",e)},value:g().kabupaten})}),Object(r.jsx)(j.g,{label:"Kecamatan",errorMessage:null===(s=x.kecamatan)||void 0===s?void 0:s.message,color:"black",children:Object(r.jsx)(et,{tingkat:"kecamatan",kodeInduk:null===(i=g().kabupaten)||void 0===i?void 0:i.value,onChange:function(e){return k("kecamatan",e)},value:g().kecamatan})}),Object(r.jsx)(j.g,{label:"Kelurahan",errorMessage:null===(u=x.kelurahan)||void 0===u?void 0:u.message,color:"black",children:Object(r.jsx)(et,{tingkat:"desa",kodeInduk:null===(o=g().kecamatan)||void 0===o?void 0:o.value,onChange:function(e){return k("kelurahan",e)},value:g().kelurahan})}),Object(r.jsx)(j.g,{label:"Detail alamat",errorMessage:null===(d=x.detail_alamat)||void 0===d?void 0:d.message,color:"black",children:Object(r.jsx)(j.t,{placeholder:"Detail alamat",fitContainer:!0,name:"detail_alamat",ref:O(ut)})}),Object(r.jsx)(j.b,{fitContainer:!0,children:"Simpan"})]})})]})},ot="idle",jt="process",dt="success",bt="error",mt=function(){var e=n.useState([]),t=Object(Ce.a)(e,2),a=t[0],r=t[1],c=n.useState(0),s=Object(Ce.a)(c,2),i=s[0],u=s[1],l=n.useState(ot),o=Object(Ce.a)(l,2),j=o[0],d=o[1],b=n.useState(1),m=Object(Ce.a)(b,2),h=m[0],O=m[1],x=n.useState(10),p=Object(Ce.a)(x,2),f=p[0],g=p[1],v=n.useCallback(Object(P.a)(_.a.mark((function e(){var t,a,n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(jt),e.next=3,tt({page:h,limit:f});case 3:if(t=e.sent,a=t.data,n=a.data,c=a.count,!a.error){e.next=11;break}return d(bt),e.abrupt("return");case 11:d(dt),r(n),u(c);case 14:case"end":return e.stop()}}),e)}))),[h,f]);return n.useEffect((function(){v()}),[v]),{data:a,count:i,status:j,page:h,limit:f,setPage:O,setLimit:g}},ht=[{Header:"Nama",accessor:"nama"},{Header:"Detail",accessor:function(e){return Object(r.jsxs)("div",{children:[e.provinsi,", ",e.kabupatem,", ",e.kecamatan,","," ",e.kelurahan,Object(r.jsx)("br",{}),e.detail]})}}],Ot=function(){var e=mt(),t=e.data,a=e.limit,n=e.page,c=e.status,s=e.count,i=e.setPage;return Object(r.jsx)(j.j,{size:"large",children:Object(r.jsxs)("div",{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:"Alamat Pengiriman"}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{children:[Object(r.jsx)(u.b,{to:"alamat-pengiriman/tambah",children:Object(r.jsx)(j.b,{children:"Tambah Alamat Baru"})}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(j.r,{items:t,columns:ht,totalItems:s,page:n,isLoading:"process"===c,perPage:a,onPageChange:function(e){return i(e)}})]}),"success"!==c||t.length?null:Object(r.jsxs)("div",{className:"text-center p-10",children:["Kamu belum menambahkan alamat pengiriman. ",Object(r.jsx)("br",{}),Object(r.jsx)(u.b,{to:"alamat-pengiriman/tambah",children:Object(r.jsx)(j.b,{children:"Tambah alamat baru"})})]})]})})},xt=a(78),pt=a.n(xt),ft=a(79),gt=a.n(ft),vt=a(55),kt=a.n(vt),yt=a(80),wt=a.n(yt);function St(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(P.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,z.post("".concat(m,"/api/orders"),t,{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(P.a)(_.a.mark((function e(t){var a,r,n,c,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,n=t.limit,c=t.page,s=c*n-n,e.next=5,z.get("".concat(m,"/api/orders"),{params:{skip:s,limit:n},headers:{authorization:"Bearer ".concat(r)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var It=function(e){var t=e.children;return Object(r.jsx)("div",{className:"text-3xl flex justify-center",children:t})},Ct=[{label:"Item",icon:Object(r.jsx)(It,{children:Object(r.jsx)(Z.a,{})})},{label:"Alamat",icon:Object(r.jsx)(It,{children:Object(r.jsx)(pt.a,{})})},{label:"Konfirmasi",icon:Object(r.jsx)(It,{children:Object(r.jsx)(gt.a,{})})}],Et=[{Header:"Nama produk",accessor:function(e){return Object(r.jsxs)("div",{className:"flex items-center",children:[Object(r.jsx)("img",{src:"".concat(m,"/upload/").concat(e.image_url),width:48,alt:e.name}),e.name]})}},{Header:"Jumlah",accessor:"qty"},{Header:"Harga satuan",id:"price",accessor:function(e){return Object(r.jsxs)("span",{children:[" @ ",te(e.price)," "]})}},{Header:"Harga total",id:"subtotal",accessor:function(e){return Object(r.jsx)("div",{children:te(e.price*e.qty)})}}],Tt=[{Header:"Nama alamat",accessor:function(e){return Object(r.jsxs)("div",{children:[e.nama," ",Object(r.jsx)("br",{}),Object(r.jsxs)("small",{children:[e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan," ",Object(r.jsx)("br",{}),e.detail]})]})}}];function qt(){var e=c.a.useState(0),t=Object(Ce.a)(e,2),a=t[0],n=t[1],s=Object(o.c)((function(e){return e.cart})),i=c.a.useState(null),d=Object(Ce.a)(i,2),b=d[0],m=d[1],h=mt(),x=h.data,p=h.status,f=h.limit,g=h.page,v=h.count,k=h.setPage,w=Object(l.g)(),S=Object(o.b)();function N(){return(N=Object(P.a)(_.a.mark((function e(){var t,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={delivery_fee:O,delivery_address:b._id},e.next=3,St(t);case 3:if(a=e.sent,!(null===(r=a.data)||void 0===r?void 0:r.error)){e.next=7;break}return e.abrupt("return");case 7:w.push("/invoice/".concat(r._id)),S(ue());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.length?Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:" Checkout "}),Object(r.jsx)(j.q,{steps:Ct,active:a}),Object(r.jsx)("br",{}),0===a?Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),Object(r.jsx)(j.r,{items:s,columns:Et,perPage:s.length,showPagination:!1}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"text-right",children:[Object(r.jsxs)(j.s,{as:"h4",children:["Subtotal: ",te(ee(s))]}),Object(r.jsx)("br",{}),Object(r.jsx)(j.b,{onClick:function(e){return n(a+1)},color:"red",iconAfter:Object(r.jsx)($.a,{}),children:" Selanjutnya "})]})]}):null,1===a?Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(j.r,{items:x,columns:Tt,perPage:f,page:g,onPageChange:function(e){return k(e)},totalItems:v,isLoading:"process"===p,selectable:!0,primaryKey:"_id",selectedRow:b,onSelectRow:function(e){return m(e)}}),x.length||"success"!==p?null:Object(r.jsx)("div",{className:"text-center my-10",children:Object(r.jsxs)(u.b,{to:"/alamat-pengiriman/tambah",children:["Kamu belum memiliki alamat pengiriman ",Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),Object(r.jsx)(j.b,{children:" Tambah alamat "})]})}),Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),Object(r.jsxs)(j.n,{desktop:2,tablet:2,mobile:2,children:[Object(r.jsx)("div",{children:Object(r.jsx)(j.b,{onClick:function(e){return n(a-1)},color:"gray",iconBefore:Object(r.jsx)(kt.a,{}),children:"Sebelumnya"})}),Object(r.jsx)("div",{className:"text-right",children:Object(r.jsx)(j.b,{onClick:function(e){return n(a+1)},disabled:!b,color:"red",iconAfter:Object(r.jsx)($.a,{}),children:"Selanjutnya"})})]})]}):null,2===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(j.r,{columns:[{Header:"",accessor:"label"},{Header:"",accessor:"value"}],items:[{label:"Alamat",value:Object(r.jsxs)("div",{children:[b.nama," ",Object(r.jsx)("br",{}),b.provinsi,", ",b.kabupaten,", ",b.kecamatan,", ",b.kelurahan," ",Object(r.jsx)("br",{}),b.detail,", ",b._id]})},{label:"Subtotal",value:te(ee(s))},{label:"Ongkir",value:te(O)},{label:"Total",value:Object(r.jsx)("b",{children:te(ee(s)+parseInt(O))})}],showPagination:!1}),Object(r.jsx)("br",{}),Object(r.jsxs)(j.n,{desktop:2,tablet:2,mobile:2,children:[Object(r.jsx)("div",{children:Object(r.jsx)(j.b,{onClick:function(e){return n(a-1)},color:"gray",iconBefore:Object(r.jsx)(kt.a,{}),children:"Sebelumnya"})}),Object(r.jsx)("div",{className:"text-right",children:Object(r.jsx)(j.b,{onClick:function(){return N.apply(this,arguments)},color:"red",size:"large",iconBefore:Object(r.jsx)(wt.a,{}),children:"Bayar"})})]})]}):null]}):Object(r.jsx)(l.a,{to:"/"})}function At(e){switch(e.status){case"waiting_payment":return Object(r.jsx)(j.a,{color:"orange",children:"Menunggu pembayaran"});case"paid":return Object(r.jsx)(j.a,{color:"green",children:"Sudah dibayar"});case"processing":return Object(r.jsx)(j.a,{color:"yellow",children:"Sedang diproses"});case"in_delivery":return Object(r.jsx)(j.a,{color:"blue",children:"Dalam pengiriman"});case"delivered":return Object(r.jsx)(j.a,{color:"green",children:"Pesanan diterima"});default:return Object(r.jsx)("div",{})}}function Lt(){return(Lt=Object(P.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},r=a.token,e.next=3,R.a.get("".concat(m,"/api/invoices/").concat(t),{headers:{authorization:"Bearer ".concat(r)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(){var e,t,a,c,s,i,u,o,d=Object(l.h)().params,b=n.useState(null),m=Object(Ce.a)(b,2),h=m[0],O=m[1],g=n.useState(""),v=Object(Ce.a)(g,2),k=v[0],w=v[1],S=n.useState("process"),_=Object(Ce.a)(S,2),P=_[0],N=_[1];return n.useState((function(){(function(e){return Lt.apply(this,arguments)})(null===d||void 0===d?void 0:d.order_id).then((function(e){var t=e.data;(null===t||void 0===t?void 0:t.error)&&w(t.message||"Terjadi kesalahan yang tidak diketahui"),O(t)})).finally((function(){return N("idle")}))}),[]),k.length?Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:"Terjadi Kesalahan"}),k]}):"process"===P?Object(r.jsx)(j.j,{children:Object(r.jsx)("div",{className:"text-center py-10",children:Object(r.jsx)("div",{className:"inline-block",children:Object(r.jsx)(X.a,{color:"red"})})})}):Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:" Invoice "}),Object(r.jsx)("br",{}),Object(r.jsx)(j.r,{showPagination:!1,items:[{label:"Status",value:Object(r.jsx)(At,{status:null===h||void 0===h?void 0:h.payment_status})},{label:"Order ID",value:"#"+(null===h||void 0===h||null===(e=h.order)||void 0===e?void 0:e.order_number)},{label:"Total amount",value:te(null===h||void 0===h?void 0:h.total)},{label:"Billed to",value:Object(r.jsxs)("div",{children:[Object(r.jsxs)("b",{children:[null===h||void 0===h||null===(t=h.user)||void 0===t?void 0:t.full_name," "]})," ",Object(r.jsx)("br",{}),null===h||void 0===h||null===(a=h.user)||void 0===a?void 0:a.email," ",Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),null===h||void 0===h||null===(c=h.delivery_address)||void 0===c?void 0:c.detail," ",Object(r.jsx)("br",{}),null===h||void 0===h||null===(s=h.delivery_address)||void 0===s?void 0:s.kelurahan,",",null===h||void 0===h||null===(i=h.delivery_address)||void 0===i?void 0:i.kecamatan," ",Object(r.jsx)("br",{}),null===h||void 0===h||null===(u=h.delivery_address)||void 0===u?void 0:u.kabupaten," ",Object(r.jsx)("br",{}),null===h||void 0===h||null===(o=h.delivery_address)||void 0===o?void 0:o.provinsi]})},{label:"Payment to",value:Object(r.jsxs)("div",{children:[x," ",Object(r.jsx)("br",{}),p," ",Object(r.jsx)("br",{}),f.account_no," ",Object(r.jsx)("br",{}),f.bank_name]})}],columns:[{Header:"Invoice",accessor:"label"},{Header:"",accessor:"value"}]})]})}At.defaultProps={};var Mt=a(81),Bt=a.n(Mt),Ht=a(82),zt=a.n(Ht),Rt=a(83),Kt=a.n(Rt),Jt=function(){var e=function(e){var t=e.children;return Object(r.jsx)("div",{className:"text-white text-5xl flex justify-center mb-5",children:t})},t=[{label:"Beranda",icon:Object(r.jsx)(e,{children:Object(r.jsx)(Bt.a,{})}),url:"/"},{label:"Alamat",icon:Object(r.jsx)(e,{children:Object(r.jsx)(zt.a,{})}),url:"/alamat-pengiriman"},{label:"Pesanan",icon:Object(r.jsx)(e,{children:Object(r.jsx)(Kt.a,{})}),url:"/pesanan"},{label:"Logout",icon:Object(r.jsx)(e,{children:Object(r.jsx)($.a,{})}),url:"/logout"}];return Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:"akun anda"}),Object(r.jsx)("br",{}),Object(r.jsx)(j.n,{desktop:4,tablet:4,mobile:2,children:t.map((function(e,t){return Object(r.jsx)("div",{className:"px-2 pb-2",children:Object(r.jsx)(u.b,{to:e.url,children:Object(r.jsx)(j.d,{header:e.icon,body:Object(r.jsx)("div",{className:"text-center font-bold text-white",children:e.label})})})},t)}))})]})},Gt=a(84),Ut=a.n(Gt),Ft=[{Header:"",id:"Status",accessor:function(e){return Object(r.jsxs)("div",{children:["#",e.order_number,Object(r.jsx)("br",{}),Object(r.jsx)(At,{status:e.status})]})}},{Header:"Items",accessor:function(e){return Object(r.jsx)("div",{children:e.order_items.map((function(e){return Object(r.jsxs)("div",{children:[e.name," ",e.qty]},e._id)}))})}},{Header:"Total",accessor:function(e){return Object(r.jsx)("div",{children:te(ee(e.order_items)+e.delivery_fee)})}},{Header:"Inovice",accessor:function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(u.b,{to:"/invoice/".concat(e._id),children:Object(r.jsx)(j.b,{color:"gray",iconBefore:Object(r.jsx)(Ut.a,{}),children:"Invoice"})})})}}],Vt=function(){var e=n.useState([]),t=Object(Ce.a)(e,2),a=t[0],c=t[1],s=n.useState(0),i=Object(Ce.a)(s,2),u=i[0],l=i[1],o=n.useState("idle"),d=Object(Ce.a)(o,2),b=d[0],m=d[1],h=n.useState(1),O=Object(Ce.a)(h,2),x=O[0],p=O[1],f=n.useState(10),g=Object(Ce.a)(f,2),v=g[0],k=(g[1],n.useCallback(Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("process"),e.next=3,Pt({limit:v,page:x});case 3:if(t=e.sent,!(a=t.data).error){e.next=8;break}return m("error"),e.abrupt("return");case 8:m("success"),c(a.data),l(a.count);case 11:case"end":return e.stop()}}),e)}))),[x,v]));return n.useEffect((function(){k()}),[k]),Object(r.jsxs)(j.j,{children:[Object(r.jsx)(y,{}),Object(r.jsx)(j.s,{as:"h3",children:"Pesanan Anda"}),Object(r.jsx)("br",{}),Object(r.jsx)(j.r,{items:a,totalItems:u,columns:Ft,onPageChange:function(e){return p(e)},page:x,isLoading:"process"===b})]})},Xt=function(){var e=Object(l.g)(),t=Object(o.b)();return n.useEffect((function(){Be().then((function(){return t({type:be})})).then((function(){return e.push("/")}))}),[e,Be]),Object(r.jsx)(j.j,{size:"small",children:Object(r.jsxs)("div",{className:"text-center flex flex-col justify-center items-center",children:[Object(r.jsx)(X.a,{color:"red"}),Object(r.jsx)("br",{}),"Logging out ..."]})})},Yt=a(18),Wt=function(e){var t=e.children,a=Object(Yt.a)(e,["children"]),n=Object(o.c)((function(e){return e.auth})).user;return Object(r.jsx)(l.b,Object(w.a)(Object(w.a)({},a),{},{children:n?t:Object(r.jsx)(l.a,{to:"/login"})}))},$t=function(e){var t=e.children,a=Object(Yt.a)(e,["children"]),n=Object(o.c)((function(e){return e.auth})).user;return Object(r.jsx)(l.b,Object(w.a)(Object(w.a)({},a),{},{children:n?Object(r.jsx)(l.a,{to:"/"}):t}))};var Qt=function(){return c.a.useEffect((function(){_e.subscribe(Ie),Ne()}),[]),Object(r.jsx)(o.a,{store:_e,children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/logout",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(Xt,{})})}),Object(r.jsx)(l.b,{path:"/pesanan",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(Vt,{})})}),Object(r.jsx)(l.b,{path:"/account",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(Jt,{})})}),Object(r.jsx)(l.b,{path:"/invoice/:order_id",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(Dt,{})})}),Object(r.jsx)(l.b,{path:"/alamat-pengiriman/tambah",children:Object(r.jsxs)(Wt,{children:[" ",Object(r.jsx)(lt,{})," "]})}),Object(r.jsx)(l.b,{path:"/alamat-pengiriman",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(Ot,{})})}),Object(r.jsx)(l.b,{path:"/checkout",children:Object(r.jsx)(Wt,{children:Object(r.jsx)(qt,{})})}),Object(r.jsx)(l.b,{path:"/register/berhasil",children:Object(r.jsxs)($t,{children:[" ",Object(r.jsx)(Ge,{})," "]})}),Object(r.jsx)(l.b,{path:"/register",children:Object(r.jsx)($t,{children:Object(r.jsx)(Je,{})})}),Object(r.jsx)(l.b,{path:"/login",children:Object(r.jsxs)($t,{children:[" ",Object(r.jsx)(Qe,{})," "]})}),Object(r.jsx)(l.b,{path:"/",component:le})]})})})},Zt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,140)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};a(138);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Qt,{})}),document.getElementById("root")),Zt()}},[[139,1,2]]]);
//# sourceMappingURL=main.314ae956.chunk.js.map